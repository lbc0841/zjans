---
title: "q001. \"421\"å¾ªç’°"
date: 2025-08-30
tags: ["IO å„ªåŒ–"]
difficulty: 3
---

***

## è§£æ³•ä¸€ã€è¿´åœˆ

### ğŸ”¹ å„ªåŒ–

**Ofast å„ªåŒ– :**<br>
`#pragma GCC optimize("Ofast")`<br>
(-Ofast = -O3 + -ffast-math + ä¸€äº›é¡å¤– aggressive çš„æœ€ä½³åŒ–)

**è¼¸å‡ºå…¥å„ªåŒ– :**<br>
`getchar_unlocked()`ã€`putchar_unlocked()`

**è¨ˆç®—å„ªåŒ– :**<br>
ç”¨ `n & 1` åˆ¤æ–·å¥‡å¶æ•¸<br>
ç”¨ `n >>= 1` é™¤ä»¥ 2

ç•¶ a æ˜¯å¥‡æ•¸æ™‚ `a = a*3 + 1`<br>
é‚£éº¼ä¸‹ä¸€å€‹ a ä¸€å®šæ˜¯å¶æ•¸<br>
å› æ­¤å¯ä»¥ä¸€èµ·è™•ç† `a = (a*3 + 1) >> 1`

(å› ç‚ºæ¸¬è³‡ a > 2 å¦å‰‡éœ€è¦å° 1 åšç‰¹åˆ¤)

### âœ… å®Œæ•´ä»£ç¢¼

è©•åˆ†çµæœ(åƒè€ƒ) ï¼š **<font color="#00bb00">AC</font> (0.2s, 320KB)**

```cpp
#include <bits/stdc++.h>
using namespace std;
#pragma GCC optimize("Ofast")

bool readLL(long long &x){
    int c = getchar_unlocked();
    if(c == EOF) return false;
    while(c <= ' '){ 
        c = getchar_unlocked();
        if (c == EOF) return false;
    }

    x = 0;
    for(; c>='0' && c<='9'; c=getchar_unlocked())
        x = x*10 + (c-'0');

    return true;
}

void writeLL(long long x, char endc = '\n') {
    static char buf[32];
    int p = 0;
    if(x == 0) buf[p++] = '0';
    else{
        while(x > 0){
            buf[p++] = '0' + (x%10);
            x /= 10;
        }
    }
    while(p--) putchar_unlocked(buf[p]);
    putchar_unlocked(endc);
}

int main(){
    long long a, cnt;
    while(readLL(a)){
        cnt = 0;
        while(a != 4){
            if (a & 1){
                a = (a*3 + 1) >> 1;
                cnt += 2;
            }
            else{
                a >>= 1;
                cnt += 1;
            }
        }
        writeLL(cnt);
    }
    
    return 0;
}
```

***

## è§£æ³•äºŒã€éè¿´

æ ¹æ“šé¡Œç›®æ§‹é€ éè¿´å¼ :

$f(x) = \left\{\begin{matrix}
x/2\;\;\; & \text{if}\;x = 2k,\;\;\;\;\;\;\; k \in \mathbb{Z} \\ 3x + 1 & \text{if}\;x = 2k+1,\; k \in \mathbb{Z}
\end{matrix}\right.$

ç„¶å¾Œåˆ¥å¿˜äº†å„ªåŒ–

### âœ… å®Œæ•´ä»£ç¢¼

è©•åˆ†çµæœ(åƒè€ƒ) ï¼š **<font color="#00bb00">AC</font> (0.2s, 328KB)**

```cpp
#include <bits/stdc++.h>
using namespace std;
#pragma GCC optimize("Ofast")

bool readLL(long long &x){
    int c = getchar_unlocked();
    if(c == EOF) return false;
    while(c <= ' '){ 
        c = getchar_unlocked();
        if (c == EOF) return false;
    }

    x = 0;
    for(; c>='0' && c<='9'; c=getchar_unlocked())
        x = x * 10 + (c-'0');

    return true;
}

void writeLL(long long x, char endc = '\n') {
    static char buf[32];
    int p = 0;
    if(x == 0) buf[p++] = '0';
    else{
        while(x > 0){
            buf[p++] = '0' + (x%10);
            x /= 10;
        }
    }
    while(p--) putchar_unlocked(buf[p]);
    putchar_unlocked(endc);
}

long long f(long long a){
    if(a == 4) return 0;
    
    if(a & 1) return 2 + f((a*3 + 1) >> 1);
    else return 1 + f(a >> 1);
}

int main(){
    long long a;
    while(readLL(a)){
        writeLL(f(a));
    }
    
    return 0;
}
```
